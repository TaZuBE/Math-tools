import{f as p,_ as m,o,c as u,b as i,t as l,F as r,g as a,e as v,w as k,T as d,n as h,h as y,p as F,a as f}from"./index-DORNQiK3.js";const b=p({content:"calculator",data(){return{memorySettings:[{content:"MC",clickFunction:()=>{}},{content:"MR",clickFunction:()=>{}},{content:"M+",clickFunction:()=>{}},{content:"M-",clickFunction:()=>{}},{content:"MS",clickFunction:()=>{}},{content:"M^",clickFunction:()=>{}}],inputKeys:[{content:"%",clickFunction:()=>{}},{content:"CE",clickFunction:()=>{}},{content:"C",clickFunction:()=>{}},{content:"⌫",clickFunction:()=>{}},{content:"1/x",clickFunction:()=>{}},{content:"x²",clickFunction:()=>{}},{content:"√x",clickFunction:()=>{}},{content:"÷",clickFunction:()=>{}},{content:"7",clickFunction:()=>{}},{content:"8",clickFunction:()=>{}},{content:"9",clickFunction:()=>{}},{content:"×",clickFunction:()=>{}},{content:"4",clickFunction:()=>{}},{content:"5",clickFunction:()=>{}},{content:"6",clickFunction:()=>{}},{content:"-",clickFunction:()=>{}},{content:"1",clickFunction:()=>{}},{content:"2",clickFunction:()=>{}},{content:"3",clickFunction:()=>{}},{content:"+",clickFunction:()=>{}},{content:"+/-",clickFunction:()=>{}},{content:"0",clickFunction:()=>{}},{content:".",clickFunction:()=>{}},{content:"=",clickFunction:()=>{}}],input:[{value:0,output:"0",over:!1},{value:0,output:"",over:!1}],symbol:"",result:0,memories:[],isWatchingMemory:!1}},mounted(){this.memorySettings[0].clickFunction=()=>{this.memories=[]},this.memorySettings[1].clickFunction=()=>{this.memories.length!==0&&(this.resetInput(),this.input[0]={value:this.memories[0].value,output:this.memories[0].value.toString(),over:!1},this.computeResult())},this.memorySettings[2].clickFunction=()=>{this.memories.length!==0&&(this.memories[0].value+=this.result)},this.memorySettings[3].clickFunction=()=>{this.memories.length!==0&&(this.memories[0].value-=this.result)},this.memorySettings[4].clickFunction=()=>{this.memories.splice(0,0,{value:this.result,mouseIn:!1,symbol:Symbol()})},this.memorySettings[5].clickFunction=()=>{const e=()=>{this.isWatchingMemory=!1,window.removeEventListener("resize",e),window.removeEventListener("click",t=>{t.target!==this.$refs.memory&&t.target!==this.$refs.memorySet&&e()})};this.isWatchingMemory=!this.isWatchingMemory,this.isWatchingMemory?(window.addEventListener("resize",e),window.addEventListener("click",t=>{!this.$refs.memory.contains(t.target)&&!this.$refs.memorySet.contains(t.target)&&e()})):e()},this.inputKeys[0].clickFunction=()=>{this.addModification("%")},this.inputKeys[1].clickFunction=()=>{this.symbol===""?this.input[0]={value:0,output:"0",over:!1}:this.input[1]={value:0,output:"",over:!1},this.computeResult()},this.inputKeys[2].clickFunction=()=>{this.resetInput()},this.inputKeys[3].clickFunction=()=>{const e=this.currentInput();if(e.output===""){this.symbol="";return}e.over?(e.output="",e.over=!1):e.output=e.output.slice(0,-1),e.value=Number(e.output),this.computeResult()},this.inputKeys[4].clickFunction=()=>{this.addModification("1/x")},this.inputKeys[5].clickFunction=()=>{this.addModification("²")},this.inputKeys[6].clickFunction=()=>{this.addModification("√")},this.inputKeys[7].clickFunction=()=>{this.enterSymbol("÷")},this.inputKeys[8].clickFunction=()=>{this.enterNumber(7)},this.inputKeys[9].clickFunction=()=>{this.enterNumber(8)},this.inputKeys[10].clickFunction=()=>{this.enterNumber(9)},this.inputKeys[11].clickFunction=()=>{this.enterSymbol("×")},this.inputKeys[12].clickFunction=()=>{this.enterNumber(4)},this.inputKeys[13].clickFunction=()=>{this.enterNumber(5)},this.inputKeys[14].clickFunction=()=>{this.enterNumber(6)},this.inputKeys[15].clickFunction=()=>{this.enterSymbol("-")},this.inputKeys[16].clickFunction=()=>{this.enterNumber(1)},this.inputKeys[17].clickFunction=()=>{this.enterNumber(2)},this.inputKeys[18].clickFunction=()=>{this.enterNumber(3)},this.inputKeys[19].clickFunction=()=>{this.enterSymbol("+")},this.inputKeys[20].clickFunction=()=>{this.addModification("+/-")},this.inputKeys[21].clickFunction=()=>{this.enterNumber(0)},this.inputKeys[22].clickFunction=()=>{this.symbol===""?this.input[0].output+=".":this.input[1].output+="."},this.inputKeys[23].clickFunction=()=>{this.input=[{value:this.result,output:this.result.toString(),over:!1},{value:0,output:"",over:!1}],this.symbol=""}},methods:{currentInput(){return this.symbol===""?this.input[0]:this.input[1]},resetInput(){this.input=[{value:0,output:"0",over:!1},{value:0,output:"",over:!1}],this.symbol="",this.computeResult()},enterNumber(e){let t=this.currentInput();if(t.over){t.value=e,t.output=e.toString(),t.over=!1,this.computeResult();return}t.value>1e14||(t.output.search("\\.")===-1?t.value=t.value*10+e:t.value+=e/Math.pow(10,t.output.length-t.output.search("\\."))*(t.value<0?-1:1),t.output=t.value.toString(),this.computeResult())},enterSymbol(e){this.input[1].output!==""&&(this.input[0].value=this.result,this.input[0].output=this.result.toString()),this.input[0].over=!0,this.symbol=e,this.input[1]={value:0,output:"",over:!1}},addModification(e){const t=this.currentInput();switch(t.over=!0,e){case"%":t==this.input[0]?this.input[0]={value:0,output:"0",over:!1}:"÷×".search("\\"+this.symbol)!==-1?(t.value*=.01,t.output=t.value.toString()):(t.value*=.01*this.input[0].value,t.output=t.value.toString());break;case"1/x":t.value=1/t.value,t.output=`1/(${t.output})`;break;case"²":t.value**=2,t.output+="²";break;case"√":t.value=Math.sqrt(t.value),t.output=`√${t.output}`;break;case"+/-":t.value*=-1,t.output=t.value.toString();break}this.computeResult()},computeResult(){if(this.result=this.input[0].value,this.input[1].output!=="")switch(this.symbol){case"+":this.result=this.input[0].value+this.input[1].value;break;case"-":this.result=this.input[0].value-this.input[1].value;break;case"×":this.result=this.input[0].value*this.input[1].value;break;case"÷":this.result=this.input[0].value/this.input[1].value;break}this.result=Number(this.result.toFixed(12))},MR(e,t){e.target.className==="item over-dark"&&(this.resetInput(),this.input[0]={value:t,output:t.toString(),over:!1},this.computeResult())}}}),g=e=>(F("data-v-692b73bb"),e=e(),f(),e),S={class:"view"},_={class:"compute"},M={class:"output"},K={class:"formula"},C={class:"result"},I={class:"input"},N={class:"memory-set",ref:"memorySet"},w=["onClick"],$={class:"keys"},R=["onClick"],L=g(()=>i("div",{class:"title"},"记忆",-1)),W={class:"memory-list"},E=["onClick","onMouseenter","onMouseleave"],B={class:"text"},z=["onClick"],D=["onClick"],P=["onClick"];function T(e,t,U,V,q,G){return o(),u("div",S,[i("div",_,[i("div",M,[i("div",K,l(e.input[0].output+e.symbol+e.input[1].output),1),i("div",C,l(e.result.toLocaleString("en-US",{maximumFractionDigits:12})),1)]),i("div",I,[i("div",N,[(o(!0),u(r,null,a(e.memorySettings,(s,c)=>(o(),u("div",{class:y(["key",c===5?"memory-key over-dark":c<4&&e.memories.length===0?"unpressable":"over-dark"]),onClick:s.clickFunction},l(s.content),11,w))),256))],512),i("div",$,[(o(!0),u(r,null,a(e.inputKeys,s=>(o(),u("div",{class:"key over-dark",onClick:s.clickFunction},l(s.content),9,R))),256))])])]),i("div",{class:"memory",ref:"memory",style:h({transform:`translate(0, ${e.isWatchingMemory?"-100%":"0"})`})},[L,i("div",W,[v(d,{name:"memory-list"},{default:k(()=>[(o(!0),u(r,null,a(e.memories,(s,c)=>(o(),u("div",{class:"item over-dark",key:s.symbol,onClick:n=>e.MR(n,e.memories[c].value),onMouseenter:n=>s.mouseIn=!0,onMouseleave:n=>s.mouseIn=!1},[i("div",B,l(s.value.toLocaleString("en-US",{maximumFractionDigits:12})),1),i("div",{class:"keys",style:h({display:s.mouseIn?"flex":"none"})},[i("div",{class:"key over-dark",onClick:n=>{n.stopPropagation(),e.memories.splice(c,1)}},"MC",8,z),i("div",{class:"key over-dark",onClick:n=>{n.stopPropagation(),s.value+=e.result}},"M+",8,D),i("div",{class:"key over-dark",onClick:n=>{n.stopPropagation(),s.value-=e.result}},"M-",8,P)],4)],40,E))),128))]),_:1})])],4)])}const A=m(b,[["render",T],["__scopeId","data-v-692b73bb"]]);export{A as default};
